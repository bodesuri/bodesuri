\documentclass[12pt,halfparskip]{scrartcl}

\newcommand{\dokumenttitel}{Tests}
\usepackage{../bodesuri}
\usepackage{multicol}


\begin{document}

\input{../titelseite}
\section{Voraussetzungen} % (fold)
\label{sec:voraussetzungen}
\begin{itemize}
	\item Die Tests werden alle im Vierspielermodus durchgeführt.
	\item Bots werden nur für Tests eingesetzt, welche sie reproduzierbar ein weiteres Mal durchlaufen können.
	\item Netzwerkverkehr und Netzwerkauslastung werden gezielt und reproduzierbar mit dem Tool iperf simuliert.
	\item Bei vermuteten TCP/IP-Problemen wird Wireshark als Sniffer verwendet und die aufgezeichneten Datenströme abgespeichert und dem Test eindeutig zugeordnet.
	\item Ein Test wird erst begonnen, wenn sein Vorgänger erfolgreich durchgeführt wurde.
\end{itemize}
% section voraussetzungen (end)

\section{Vorbereitungen} % (fold)
\label{sec:vorbereitungen}
\paragraph{Vor allen Tests}\label{ssub:vorbereitungen_vor_allen_tests} % (fold)
	\begin{itemize}
		\item Auf den PCs, auf denen der Server und die Clients laufen, werden alle Firewalls deaktiviert oder die verwendeten Ports explizit freigeschaltet.
	\end{itemize}
% paragraph vorbereitungen_vor_allen_tests (end)
\paragraph{Vor jeder Test-Iteration}\label{ssub:vorbereitungen_vor_jeder_testiteration} % (fold)
	\begin{itemize}
		\item Testprotokoll zur Ausfüllung vorbereiten.
	\end{itemize}
% paragraph vorbereitungen_vor_jeder_testiteration (end)
% section vorbereitungen (end)

\section{Nachbearbeitungen}\label{sec:nachbearbeitungen} % (fold)
	\paragraph{Nach allen Tests}\label{ssub:nach_allen_tests} % (fold)
		\begin{itemize}
			\item Alle Tests müssen erfolgreich absolviert worden sein.
			\item Alle Unit-Tests funktionieren (Green Bar).
		\end{itemize}
	% paragraph nach_allen_tests (end)
	\paragraph{Nach jeder Test-Iteration}\label{ssub:nach_jeder_test_iteration} % (fold)
		\begin{itemize}
			\item Alle gefundenen Fehler wurden korrigiert.
			\item Alle Unit-Tests funktionieren (Green Bar).
			\item Testprotokoll wurde vollständig ausgefüllt.
		\end{itemize}
	% paragraph nach_jeder_test_iteration (end)
% section nachbearbeitungen (end)

\section{JUnit-Tests}\label{sec:junit_tests} % (fold)
Im Folgenden werden die JUnit-Tests beschrieben, welche hauptsächlich die Problem-Domain-Klassen abdecken und weite Teile der Applikationsschicht. Die UI- und Dienste-Schicht werden nicht explizit und nur punktuell durch JUnit-Tests abgedeckt. Sie werden hauptsächlich durch die Use-Case-Tests manuell getestet.
\subsection{JUnit-Tests für das Package <<pd>>}\label{sub:junit_tests_für_das_package_pd_} % (fold)
	\paragraph{ProblemDomainTestCase}\label{ssub:problemdomaintestcase} % (fold)
	Erweitert den eingebauten Typen <<TestCase>> um das Spiel, Brett und den Kartengeber. Die Klasse bietet folgende zusätzliche Methoden:
	\begin{itemize}
		\item BankFeld bank(int spieler) --> Bankfeld des Spielers.
		\item Spieler spieler(int nummer) --> Spieler anhand der Nummer.
		\item LagerFeld lager(int spieler) --> erstes Lagerfeld des Spielers.
		\item LagerFeld lager(int spieler, int feld) --> konkretes Lagerfeld des Spielers.
		\item HimmelFeld himmel(int spieler) --> erstes Himmelfeld des Spielers.
		\item HimmelFeld himmel(int spieler, int feld) --> konkretes Himmelfeld des Spielers.
	\end{itemize}
	% paragraph problemdomaintestcase (end)
	\paragraph{BrettTest}\label{ssub:bretttest} % (fold)
	Testet die Funktionalitäten des Brettes. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testGetAlleFelder() --> Prüft, ob alle Felder vorhanden sind.
		\item testGetFreiesLagerFeldVon() --> Prüft, ob Freies Lagerfeld gefunden wird und ob keines gefunden wird, wenn alle Lagerfelder besetzt sind.
	\end{itemize}
	% paragraph bretttest (end)
	\paragraph{FeldTest}\label{ssub:feldtest} % (fold)
	Testet die Funktionalitäten des Feldes. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testNächstesVorheriges() --> Prüft Feldverkettung.
		\item testGetNtesFeld() --> Prüft Feldverkettung und Getter-Methode.
		\item testIstFrei() --> Prüft Getter-Methode.
		\item testIstBesetzt() --> Prüft Getter-Methode.
		\item testVersetzeFigurAuf() --> Versetzt Figur auf anderes Feld.
		\item testGetHimmel() --> Prüft auf Konsistenz der Himmelfelder.
		\item testGetSpieler() --> Prüft auf Konstistenz des Spielers.
		\item testGetNummer() --> Prüft auf Konsistenz der Feldnummerierung.
	\end{itemize}
	% paragraph feldtest (end)
	\paragraph{KartenTest}\label{ssub:kartentest} % (fold)
	Testet die Funktionalitäten der Karten. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testKarte() --> Prüft Getter-Methoden und Initialisierung der Karte.
		\item testDeck() --> Prüft Deck, ob korrekt initialisiert.
		\item testGetKarte() --> Prüft Verhalten beim Mischeln.
	\end{itemize}
	% paragraph kartentest (end)
	\paragraph{SpielTest}\label{ssub:spieltest} % (fold)
	Testet die Funktionalitäten des Spiels. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testSpieler() --> Prüft auf konsistentes Verhalten des Spielers innerhalb des Spiels.
	\end{itemize}
	% paragraph spieltest (end)
	\paragraph{WegTest}\label{ssub:wegtest} % (fold)
	Testet die Funktionalität des Zugverhaltens. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testWegVorwärts() --> Testet normalen Vorwärtsweg.
		\item testWegVorwärtsÜberGrenze() --> Testet Vorwärtsweg über Grenze.
		\item testWegRückwärts() --> Testet normalen Rückwärtsweg.
		\item testWegRückwärtsÜberGrenze() --> Testet Rückwärtsweg über Grenze.
		\item testWegVonEinemHimmelZumAnderen() --> Testet Weg vom einen Himmelfeld zum anderen.
	\end{itemize}
	% paragraph wegtest (end)
	\paragraph{ZugTest}\label{ssub:zugtest} % (fold)
	Testet die Funktionalität des Zugsystems. Folgende Tests werden durchgeführt:
	\begin{itemize}
		\item testZugEingabe() --> Prüft, ob Zugeingabe richtig validiert wird.
		\item testAktionAufBesetztesFeld() --> Prüft, ob verbotene Aktionen verhindert werden.
	\end{itemize}
	% paragraph zugtest (end)
	\subsubsection{JUnit-Tests für das Package <<regelsystem>>}\label{ssub:junit_tests_für_das_package_regelsystem_} % (fold)
		\paragraph{RegelTestCase}\label{ssub:regeltestcase} % (fold)
		Erweitert den eingebauten Typen <<TestCase>> um einen Spieler, Startfeld, Zielfeld und eine Regel. Die Klasse bietet folgende zusätzliche Methoden:
		\begin{itemize}
			\item sollteValidieren() --> Validiert eine Standardregel.
			\item sollteValidieren(Regel regel) --> Validiert eine konkrete Regel.
			\item sollteVerstossGeben() --> Prüft, ob Standardregel Verstoss verursacht.
			\item sollteVerstossGeben(Regel regel) --> Prüft, ob konkrete Regel Verstoss verursacht.
			\item List<Bewegung> getBewegungen() --> Erstellt eine Liste mit Bewegungen.
		\end{itemize}
		% paragraph regeltestcase (end)
		\paragraph{RegelVeroderungTest}\label{ssub:regelveroderungtest} % (fold)
		Testet die Funktionalitäten der RegelVeroderung. Folgende Tests werden durchgeführt:
		\begin{itemize}
			\item testVier() --> Validiert Viererregel (normal, vorwärts).
			\item testVierFalsch() --> Validiert Viererregel (Verstoss, vorwärts).
			\item testVierRückwärts() --> Validiert Viererregel (normal, rückwärts).
			\item testVierRückwärtsFalsch() --> Validiert Viererregel (Verstoss, rückwärts).
		\end{itemize}
		% paragraph regelveroderungtest (end)
		\paragraph{RegelVerstossTest}\label{ssub:regelverstosstest} % (fold)
		Testet die Funktionalitäten eines Regelverstosses. Folgende Tests werden durchgeführt:
		\begin{itemize}
			\item testRegelVerstoss() --> Prüft, ob Regelverstösse richtig geworfen werden.
		\end{itemize}
		% paragraph regelverstosstest (end)
		\paragraph{RückwärtsRegelTest}\label{ssub:rückwärtsregeltest} % (fold)
		Testet die Funktionalitäten der Rückwärtsregel. Folgende Tests werden durchgeführt:
		\begin{itemize}
			\item testRückwärts() --> 
			\item testRückwärtsVorwärts() --> 
			\item 
		\end{itemize}
		% paragraph rückwärtsregeltest (end)
		\paragraph{SiebnerRegelTest}\label{ssub:siebnerregeltest} % (fold)
		
		% paragraph siebnerregeltest (end)
		\paragraph{StartRegelTest}\label{ssub:startregeltest} % (fold)
		
		% paragraph startregeltest (end)
		\paragraph{TauschRegelTest}\label{ssub:tauschregeltest} % (fold)
		
		% paragraph tauschregeltest (end)
		\paragraph{VorwärtsRegelTest}\label{ssub:vorwärtsregeltest} % (fold)
		
		% paragraph vorwärtsregeltest (end)
	% subsubsection junit_tests_für_das_package_regelsystem_ (end)
% subsection junit_tests_für_das_package_pd_ (end)
\subsection{JUnit-Tests für das Package <<applikation>>}\label{sub:junit_tests_für_das_package_applikation_} % (fold)
	\paragraph{TestSpieler}\label{ssub:testspieler} % (fold)
	
	% paragraph testspieler (end)
% subsection junit_tests_für_das_package_applikation_ (end)
\subsection{JUnit-Tests für das Package <<dienste>>}\label{sub:junit_tests_für_das_package_dienste_} % (fold)
	\paragraph{TestAutomat}\label{ssub:testautomat} % (fold)
	
	% paragraph testautomat (end)
	\paragraph{AutomatenTest}\label{ssub:automatentest} % (fold)
	
	% paragraph automatentest (end)
	\paragraph{ServerTest}\label{ssub:servertest} % (fold)
	
	% paragraph servertest (end)
	\paragraph{SerialisierungTest}\label{ssub:serialisierungtest} % (fold)
	
	% paragraph serialisierungtest (end)
	\subsubsection{JUnit-Tests für das Package <<dienste.automat.events>>}\label{ssub:junit_tests_für_das_package_dienste_automat_events_} % (fold)
		\paragraph{TestEventA}\label{ssub:testeventa} % (fold)
		
		% paragraph testeventa (end)
		\paragraph{TestEventB}\label{ssub:testeventb} % (fold)
		
		% paragraph testeventb (end)
		\paragraph{TestEventC}\label{ssub:testeventc} % (fold)
		
		% paragraph testeventc (end)
		\paragraph{TestExitEvent}\label{ssub:testexitevent} % (fold)
		
		% paragraph testexitevent (end)
	% subsubsection junit_tests_für_das_package_dienste_automat_events_ (end)
	\subsubsection{JUnit-Tests für das Package <<dienste.automat.zustaende>>}\label{ssub:junit_tests_für_das_package_dienste_automat_} % (fold)
		\paragraph{AktiverTestZustand}\label{ssub:aktivertestzustand} % (fold)
		
		% paragraph aktivertestzustand (end)
		\paragraph{AktiverTestZustandAlpha}\label{ssub:aktivertestzustandalpha} % (fold)
		
		% paragraph aktivertestzustandalpha (end)
		\paragraph{AktiverTestZustandBeta}\label{ssub:aktivertestzustandbeta} % (fold)
		
		% paragraph aktivertestzustandbeta (end)
		\paragraph{DummyZustand}\label{ssub:dummyzustand} % (fold)
		
		% paragraph dummyzustand (end)
		\paragraph{PassiverTestZustandAlpha}\label{ssub:passivertestzustandalpha} % (fold)
		
		% paragraph passivertestzustandalpha (end)
		\paragraph{PassiverTestZustandBeta}\label{ssub:passivertestzustandbeta} % (fold)
		
		% paragraph passivertestzustandbeta (end)
	% subsubsection junit_tests_für_das_package_dienste_automat_ (end)
% subsection junit_tests_für_das_package_dienste_ (end)
% section junit_tests (end)

\section{Systemtest} % (fold)
\label{sec:systemtest}

\subsection{Tests anhand der Use-Cases}\label{sub:tests_anhand_der_use_cases} % (fold)

\subsubsection{UC1: Spiel erstellen}\label{sub:uc1_spiel_erstellen} % (fold)
\begin {tabular}{r | p{3cm} | p{8cm} | l}
\toprule
\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
\midrule
1, 2, 3 & Server-Start \newline erfolgreich & Der Server ist gestartet, funktioniert und ist betriebsbereit. & [Ok|Err] \\
 \cline{3-4} & & Es wird eine Bestätigung ausgegeben, dass der Server läuft. & \\
\midrule
2a & Serer-Start fehlgeschlagen & Es wird eine Fehlermeldung ausgegeben und der Server beendet sich vollständig. & [Ok|Err] \\
 \cline{3-4} & & An den Benutzer wurde eine Fehlermeldung ausgegeben, mit sprechenden Erklärungen und allfälligen Hinweisen die zur Behebung des Problems beitragen. & \\
\midrule
1, 2 & Mehrere Server-Instanzen & Wird ein zweiter Server gestartet wird dem Benutzer mitgeteilt, dass bereites ein anderer Server am laufen ist. & [Ok|Err] \\
\bottomrule
\end{tabular}
% subsubsection uc1_spiel_erstellen (end)

\subsubsection{UC2: Spiel beitreten}\label{sub:uc2_spiel_beitreten} % (fold)
\begin {tabular}{r | p{3cm} | p{8cm} | l}
\toprule
\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
\midrule
1, 2, 3, 4 & Client verbunden & Der Client hat sich auf den Server verbunden und der Server kennt den Client. & [Ok|Err] \\
 \cline{3-4} & & Der Benutzer ist informiert worden, dass er dem Spiel erfolgreich beigetreten ist. & \\
\midrule
2a & Verbindung fehlgeschlagen & Der Benutzer wird vom System über das Scheitern benachrichtigt. &   \\
\midrule
2b & Server besetzt & Dem Benutzer wird mitgeteilt, dass der Server bereits voll ist. Das laufende Spiel wird nicht beeinflusst. & [Ok|Err] \\
\midrule
*a & Verbindung abgebrochen & Serverprozess beenden (Absturz simulieren). & [Ok|Err]  \\
\cline{3-4} & & Das Spiel wird mit einer Fehlermeldung abgebrochen. Alle Parteien werden über das Ende informiert. & \\
\bottomrule
\end{tabular}
% subsubsection uc2_spiel_beitreten (end)

\subsubsection{UC3: Spiel spielen}\label{sub:uc3_spiel_spielen} % (fold)
\begin {tabular}{r | p{3cm} | p{9cm} | l}
\toprule
\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
\midrule
1 & Spielbrett initialisiert & Das Spielbrett ist initialisiert und auf allen Clients innerhalb der Zeitlimite von 3\,s synchronisiert. & [Ok|Err] \\
 \cline{3-4} & & Alle Clients und der Server befinden sich in einem wohldefinierten Zustand. & \\
\midrule
2 & Karten erhalten & Der beteiligte Client hat die Spielkarten erhalten und visualisiert sie korrekt für den Spieler. & [Ok|Err] \\
\midrule
3 & Karten für Tausch auswählen & Vom Benutzer ausgewählte Spielkarten sind visualisiert und als ausgewählt hervorgehoben. & [Ok|Err] \\
 \cline{3-4} & & Dem Spieler wird visuell mitgeteilt, dass das System bereit ist den Kartentausch abzuwickeln. & \\
\midrule
4 & Karten-Tausch übermitteln & Die vom Benutzer getauschten Spielkarten sind an den Server übermittelt und auf dem Client (der die Spielkarten gesendet hat) nicht mehr vorhanden. & [Ok|Err] \\
 \cline{3-4} & & Der Client (der die Spielkarten gesendet hat) hat diejenigen Spielkarten vom Server empfangen, die der Partnerspieler zum Tausch an den Server übermittelt hatte. & \\
 \cline{3-4} & & Für den Spieler werden die Spielkarten nach dem Tausch korrekt visualisiert. & \\
\midrule
5 & Spielzüge visualisieren & Benutzer kann keine spieleingreifende Eingaben tätigen. & [Ok|Err] \\
 \cline{3-4} & & Spielzüge werden korrekt auf dem Client visualisiert. & \\
 \cline{3-4} & & Client ist nach jedem Spielzug zu den anderen Clients synchronisiert. & \\
\midrule
6 & Spielzug auswählen & Vom Benutzer ausgewählte Spielkarte ist visualisiert und als ausgewählt hervorgehoben. & [Ok|Err] \\
 \cline{3-4} & & Spielzug ist vom System erfasst und für den Spieler visuell ersichtlich. & \\
 \cline{3-4} & & TODO: Hier müssen wir später verschiedene Zugerfassungs-Arten aufzeigen und testn. & \\
 \cline{3-4} & & Dem Spieler wird visuell mitgeteilt, dass das System bereit ist den Spielzug durchzuführen. & \\
\bottomrule
\end{tabular}

%\newpage

\begin {tabular}{r | p{3cm} | p{8cm} | l}
\toprule
\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
\midrule
7, 8, 9 & Spielzug übermitteln & Spielzug ist vom Client validiert worden und gültig. & [Ok|Err] \\
 \cline{3-4} & & Spielzug ist an Server übermittelt. & \\
 \cline{3-4} & & Spielzug wird wird binnen drei Sekunden im Client visualisiert & \\
 \cline{3-4} & & Alle Clients haben den Spielzug visualisiert und sind synchronisiert. & \\
\midrule
6a & Kein Karte spielbar & Dem Server wurde mitgeteilt, dass Spieler diese Runde nicht spielen kann. & [Ok|Err] \\
 \cline{3-4} & & Alle Clients sind synchronisiert. & \\
\midrule
7a & Spielzug ungültig & Benutzer wird über ungültigen Zug benachrichtigt. & [Ok|Err] \\
 \cline{3-4} & & Benutzer weiss, dass er anderen Spielzug auswählen muss. & \\
\midrule
9a a) & Spiel gewonnen & Auf allen Clients und dem Server ist das Spiel beendet. & [Ok|Err] \\
 \cline{3-4} & & Gewinner (-Team) ist klar ersichtlich. & \\
\midrule
9a b) & Spiel gewonnen & Der Server weiss, dass der Spieler fertig ist. & [Ok|Err] \\
 \cline{3-4} & & Spieler-Status ist auf allen Clients synchronisiert und für Spieler ersichtlich. & \\
 \cline{3-4} & & Der Spieler, der neu fertig ist, kann nun auch die Figuren des Mitpsielers bedienen (wenn er an der Reihe ist). & \\
\midrule
*a) & Benutzer verlässt Spiel & Spiel wird auf allen Clients und dem Server beendet. & [Ok|Err] \\
 \cline{3-4} & & Gewinner (-Team) ist klar ersichtlich. & \\
\midrule
*b) & Server nicht erreichbar & Benutzer wird vom System benachrichtigt. & [Ok|Err] \\
 \cline{3-4} & & Auf allen Clients wird eine Fehlermeldung angezeigt. & \\
\bottomrule
\end{tabular}
% subsubsection uc3_spiel_spielen (end)

% subsection tests_anhand_der_use_cases (end)

\subsection{Tests anhand der nichtfunktionalen Anforderungen}\label{sub:tests_anhand_der_nichtfunktionalen_anforderungen} % (fold)
\begin {tabular}{l p{11cm} l}
\toprule
\textbf{Nr.} & \textbf{Beschreibung} & \textbf{Eingehalten} \\
\midrule
NF1 & Jeder Spielzug wird nach maximal 3 Sekunden visualisiert. Sprich der Zug wurde an den Server gesendet und vom Server wieder zurückerhalten. & [Ok|Err] \\
NF2 & Spielzustand ist nach jedem Spielzug in allen Clients und auf dem Server konsistent. & [Ok|Err] \\
NF3 & Inkonsistenz führt im Server und auf den Clients zu kontrolliertem Spielabbruch. & [Ok|Err] \\
NF4 & Es können nicht mehrere Spiele pro Server erstellt werden. & [Ok|Err] \\
NF5 & Ein Spiel kann nur mit der genauen Anzahl von vier Spielern gestartet werden. & [Ok|Err] \\
NF6 & Das GUI ist (bis auf die Server-Konfiguration und Verbindungsaufnahme) nur mit der Maus bedienbar. & [Ok|Err] \\
NF7 & Der Server sowie der Client ist uneingeschränkt auf den Plattformen Mac OS X 10.4, Windows XP SP2 und GNU/Linux verwendbar. & [Ok|Err] \\
NF8 & Weder für den Server noch für den Client ist eine Installation oder Konfiguration notwendig. & [Ok|Err] \\
NF9 & Ausser des Spielernamens und der Serverkonfiguration müssen keine Konfigurationen eingegeben werden. & [Ok|Err] \\
\bottomrule
\end{tabular}
% subsection tests_anhand_der_nichtfunktionalen_anforderungen (end)
% section systemtest (end)

\section{Tests anhand konkreter Spielsituationen}\label{sec:tests_anhand_konkreter_spielsituationen} % (fold)

% section tests_anhand_konkreter_spielsituationen (end)

\section{Verbesserungsmöglichkeiten} % (fold)
\label{sec:verbesserungsmöglichkeiten}
\subsection{Bekannte Einschränkungen} % (fold)
\label{sub:bekannte_einschränkungen}
bekannte Einschränkungen erwähnen und erläutern
% subsection bekannte_einschränkungen (end)
\subsection{Mögliche Detailverbesserungen} % (fold)
\label{sub:mögliche_detailverbesserungen}
daraus resultierende Verbesserungen beschreiben
% subsection mögliche_detailverbesserungen (end)
% section verbesserungsmöglichkeiten (end)

\end{document}
