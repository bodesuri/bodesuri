\documentclass[12pt,halfparskip]{scrartcl}

\newcommand{\dokumenttitel}{Code}
\usepackage{../bodesuri}
\usepackage{multicol}


\begin{document}

\input{../titelseite}

\section{Coderichtlinien}\label{sub:coderichtlinien} % (fold)

Grundsätzlich folgen wir den "<Sun Coding Quidelines">. Zusätzlich gelten die folgenden Regeln:

\begin{itemize}
  \item Öffnende geschwungene Klammer (\texttt{\{}) auf gleicher Zeile
  \item Einrücken mit Tabulatoren, Formatieren mit Leerzeichen
  \item 1 Tabulator hat die Breite 4
  \item Maximal 80 Zeichen pro Zeile
  \item Sprache: Deutsch mit vernünftigen Ausnahmen (get und nicht gib...)
  \item Mit Javadoc kommentieren wo sinnvoll (z. B. keine Getter/Setter kommentieren)
  \item Paketnamen klein schreiben
  \item Copyright-Header\footnote{Die Möglichkeit einer Veröffentlichung des Projekts unter einer FOSS-Lizenz wird nach Abschluss des Projektes geprüft werden.} in allen Dateien:
    \begin{verbatim}
/* Copyright (c) 2007 Danilo Couto, Philippe Eberli,
 *                    Pascal Hobus, Reto Schüttel, Robin Stocker
 */
    \end{verbatim}
\end{itemize}


\paragraph{Beispielcode} (\texttt{----->} stellt einen Tabulator dar)

\begin{verbatim}
--->public void funktion(int erstens, int zweitens) {
--->--->if (erstens == zweitens) {
--->--->--->funktionZwei("Gleich");
--->--->} else {
--->--->--->funktionMitVielenArgumenten("Ungleich", erstens, zweitens,
--->--->--->                            undNochEinArgument);
--->--->}
--->}
\end{verbatim}

\section{Reviews} % (fold)
\label{sec:reviews}
Es wurden im Rahmen des Projektes verschiedene Code-Reviews durchgeführt. Sie dienten einerseits einer Qualitätskontrolle und andererseits fand dank ihnen auch ein verstärkter Know-How Transfer statt.

Ein Review dauerte in der Regel eine Stunde und wurde in wechselnden Paaren durchgeführt. Die dabei entstandenen Erkenntnissen und Aufgaben wurden im Wiki dokumentiert. Nachfolgend eine kurze Zusammenfassung der einzelnen Reviews

\subsubsection{Review Netzwerk - Pascal \& Reto}
\label{ssub:review_netzwerk_pascal_amp_reto}

\begin{itemize}
	\item Kleine Verbesserungen in den Netzwerk Klassen
	\item Verhalten bei Timeouts und Verbindungsfehlern diskutiert
	\item Weiteres Vorgehen für die Synchronisation zwischen Client und Server besprochen
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-05-10\%20Pascal/Reto}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-05-10\%20Pascal/Reto}

\subsubsection{Problem Domain - Philippe \& Robin}
\label{ssub:problem_domain_philippe_amp_robin}

\begin{itemize}
	\item Kleine Refactorings (u.a. WegFeld umbenannt nacht NormalesFeld)
	\item Serialisierung vereinfacht
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-25\%20Philippe/Robin}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-25\%20Philippe/Robin}

\subsubsection{GUI / Automaten Kommunikation - Danilo \& Pascal}
\label{ssub:gui_automaten_kommunikation_danilo_amp_pascal}

\begin{itemize}
	\item Kommunikation zwischen GUI und Automaten geplant
	\item Controller angeschaut und an einigen Stellen verbessert
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-11\%20Pascal/Danilo}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-11\%20Pascal/Danilo}

\subsubsection{Automat - Reto \& Robin}
\label{ssub:automat_reto_amp_robin}

\begin{itemize}
	\item Synchronisation-Logik vereinfacht
	\item Neue Klasse Weg geplant die vom Regelsystem wie auch für die Wegmarkierung im UI verwendet werden kann
	\item Verschiedene kleinere Refactorings
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-11\%20Reto/Robin}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-11\%20Reto/Robin}

\subsubsection{GUI - Danilo \& Philippe}
\label{ssub:gui_danilo_amp_philippe}

\begin{itemize}
	\item Lobby-View vereinfacht
	\item Setzen des Swing Look and Feels an einer zentralen Stelle
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-22\%20Danilo/Philippe}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-06-22\%20Danilo/Philippe}

\subsubsection{User-Feeling - Philippe \& Robin}
\label{ssub:user_feeling_philippe_amp_robin}

\begin{itemize}
	\item Kleinere Bugs gefunden und behoben (z.B. falsche Reihenfolge)
	\item GUI-Handling an verschiedenen durch kleine Massnahmen verbessert
	\item Verschiedene Meldungen und Fehlermeldungen verbessert
\end{itemize}

\htmladdnormallink{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-05-11\%20Philippe/Robin}{http://bodesuri.speedpc.ch/trac/wiki/Review\%202007-05-11\%20Philippe/Robin}

\section{Tests}\label{sec:tests}
\subsubsection{Voraussetzungen}
\begin{itemize}
	\item Die Tests werden alle im Vierspielermodus durchgeführt.
	\item Bots werden nur für Tests eingesetzt, welche sie reproduzierbar ein weiteres Mal durchlaufen können.
	\item Netzwerkverkehr und Netzwerkauslastung werden gezielt und reproduzierbar mit dem Tool iperf simuliert.
	\item Bei vermuteten TCP/IP-Problemen wird Wireshark als Sniffer verwendet und die aufgezeichneten Datenströme abgespeichert und dem Test eindeutig zugeordnet.
	\item Ein Test wird erst begonnen, wenn sein Vorgänger erfolgreich durchgeführt wurde.
\end{itemize}

\subsubsection{Vorbereitungen}
\paragraph{Vor allen Tests}\label{ssub:vorbereitungen_vor_allen_tests} 
	\begin{itemize}
		\item Auf den PCs, auf denen der Server und die Clients laufen, werden alle Firewalls deaktiviert oder die verwendeten Ports explizit freigeschaltet.
	\end{itemize}

\paragraph{Vor jeder Test-Iteration}\label{ssub:vorbereitungen_vor_jeder_testiteration}
	\begin{itemize}
		\item Testprotokoll zur Ausfüllung vorbereiten.
	\end{itemize}

\section{Nachbearbeitungen}\label{sec:nachbearbeitungen}
	\paragraph{Nach allen Tests}\label{ssub:nach_allen_tests}
		\begin{itemize}
			\item Alle Tests müssen erfolgreich absolviert worden sein.
			\item Alle Unit-Tests funktionieren (Green Bar).
		\end{itemize}

	\paragraph{Nach jeder Test-Iteration}\label{ssub:nach_jeder_test_iteration}
		\begin{itemize}
			\item Alle gefundenen Fehler wurden korrigiert.
			\item Alle Unit-Tests funktionieren (Green Bar).
			\item Testprotokoll wurde vollständig ausgefüllt.
		\end{itemize}
		
\subsubsection{JUnit-Tests}
Die JUnit Tests, welche hauptsächlich die Dienste- und Problem-Domain-Klassen sowie weite Teile der Applikationsschicht abdecken wurden mit JavaDoc dokumentiert. Die UI-Schicht wird nicht explizit und nur punktuell durch JUnit-Tests abgedeckt. Sie wird hauptsächlich durch die Use-Case-Tests manuell getestet.

Details zu den JUnit Tests können aus der JavaDoc entnommen werden.

\subsubsection{Systemtests}
\subsubsection{Use-Case Test: UC1 Spiel erstellen}
	\begin {tabular}{r | p{3cm} | p{8cm} | l}
		\toprule
		\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
		\midrule
		1, 2, 3 & Server-Start \newline erfolgreich & Der Server ist gestartet, funktioniert und ist betriebsbereit. & [Ok|Err] \\
		 \cline{3-4} & & Es wird eine Bestätigung ausgegeben, dass der Server läuft. & \\
		\midrule
		2a & Serer-Start fehlgeschlagen & Es wird eine Fehlermeldung ausgegeben und der Server beendet sich vollständig. & [Ok|Err] \\
		 \cline{3-4} & & An den Benutzer wurde eine Fehlermeldung ausgegeben, mit sprechenden Erklärungen und allfälligen Hinweisen die zur Behebung des Problems beitragen. & \\
		\midrule
		1, 2 & Mehrere Server-Instanzen & Wird ein zweiter Server gestartet wird dem Benutzer mitgeteilt, dass bereites ein anderer Server am laufen ist. & [Ok|Err] \\
		\bottomrule
	\end{tabular}

\subsubsection{UC2: Spiel beitreten}
	\begin {tabular}{r | p{3cm} | p{8cm} | l}
		\toprule
		\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
		\midrule
		1, 2, 3, 4 & Client verbunden & Der Client hat sich auf den Server verbunden und der Server kennt den Client. & [Ok|Err] \\
		 \cline{3-4} & & Der Benutzer ist informiert worden, dass er dem Spiel erfolgreich beigetreten ist. & \\
		\midrule
		2a & Verbindung fehlgeschlagen & Der Benutzer wird vom System über das Scheitern benachrichtigt. &   \\
		\midrule
		2b & Server besetzt & Dem Benutzer wird mitgeteilt, dass der Server bereits voll ist. Das laufende Spiel wird nicht beeinflusst. & [Ok|Err] \\
		\midrule
		*a & Verbindung abgebrochen & Serverprozess beenden (Absturz simulieren). & [Ok|Err]  \\
		\cline{3-4} & & Das Spiel wird mit einer Fehlermeldung abgebrochen. Alle Parteien werden über das Ende informiert. & \\
		\bottomrule
	\end{tabular}
	
\subsubsection{UC3: Spiel spielen}
	\begin {tabular}{r | p{3cm} | p{9cm} | l}
		\toprule
		\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
		\midrule
		1 & Spielbrett initialisiert & Das Spielbrett ist initialisiert und auf allen Clients innerhalb der Zeitlimite von 3\,s synchronisiert. & [Ok|Err] \\
		 \cline{3-4} & & Alle Clients und der Server befinden sich in einem wohldefinierten Zustand. & \\
		\midrule
		2 & Karten erhalten & Der beteiligte Client hat die Spielkarten erhalten und visualisiert sie korrekt für den Spieler. & [Ok|Err] \\
		\midrule
		3 & Karten für Tausch auswählen & Vom Benutzer ausgewählte Spielkarten sind visualisiert und als ausgewählt hervorgehoben. & [Ok|Err] \\
		 \cline{3-4} & & Dem Spieler wird visuell mitgeteilt, dass das System bereit ist den Kartentausch abzuwickeln. & \\
		\midrule
		4 & Karten-Tausch übermitteln & Die vom Benutzer getauschten Spielkarten sind an den Server übermittelt und auf dem Client (der die Spielkarten gesendet hat) nicht mehr vorhanden. & [Ok|Err] \\
		 \cline{3-4} & & Der Client (der die Spielkarten gesendet hat) hat diejenigen Spielkarten vom Server empfangen, die der Partnerspieler zum Tausch an den Server übermittelt hatte. & \\
		 \cline{3-4} & & Für den Spieler werden die Spielkarten nach dem Tausch korrekt visualisiert. & \\
		\midrule
		5 & Spielzüge visualisieren & Benutzer kann keine spieleingreifende Eingaben tätigen. & [Ok|Err] \\
		 \cline{3-4} & & Spielzüge werden korrekt auf dem Client visualisiert. & \\
		 \cline{3-4} & & Client ist nach jedem Spielzug zu den anderen Clients synchronisiert. & \\
		\midrule
		6 & Spielzug auswählen & Vom Benutzer ausgewählte Spielkarte ist visualisiert und als ausgewählt hervorgehoben. & [Ok|Err] \\
		 \cline{3-4} & & Spielzug ist vom System erfasst und für den Spieler visuell ersichtlich. & \\
		 \cline{3-4} & & TODO: Hier müssen wir später verschiedene Zugerfassungs-Arten aufzeigen und testn. & \\
		 \cline{3-4} & & Dem Spieler wird visuell mitgeteilt, dass das System bereit ist den Spielzug durchzuführen. & \\
		\bottomrule
	\end{tabular}
	
	\begin {tabular}{r | p{3cm} | p{8cm} | l}
		\toprule
		\textbf{UC} & \textbf{Beschreibung} & \textbf{Erwartetes Verhalten} & \textbf{Ergebnis} \\
		\midrule
		7, 8, 9 & Spielzug übermitteln & Spielzug ist vom Client validiert worden und gültig. & [Ok|Err] \\
		 \cline{3-4} & & Spielzug ist an Server übermittelt. & \\
		 \cline{3-4} & & Spielzug wird wird binnen drei Sekunden im Client visualisiert & \\
		 \cline{3-4} & & Alle Clients haben den Spielzug visualisiert und sind synchronisiert. & \\
		\midrule
		6a & Kein Karte spielbar & Dem Server wurde mitgeteilt, dass Spieler diese Runde nicht spielen kann. & [Ok|Err] \\
		 \cline{3-4} & & Alle Clients sind synchronisiert. & \\
		\midrule
		7a & Spielzug ungültig & Benutzer wird über ungültigen Zug benachrichtigt. & [Ok|Err] \\
		 \cline{3-4} & & Benutzer weiss, dass er anderen Spielzug auswählen muss. & \\
		\midrule
		9a a) & Spiel gewonnen & Auf allen Clients und dem Server ist das Spiel beendet. & [Ok|Err] \\
		 \cline{3-4} & & Gewinner (-Team) ist klar ersichtlich. & \\
		\midrule
		9a b) & Spiel gewonnen & Der Server weiss, dass der Spieler fertig ist. & [Ok|Err] \\
		 \cline{3-4} & & Spieler-Status ist auf allen Clients synchronisiert und für Spieler ersichtlich. & \\
		 \cline{3-4} & & Der Spieler, der neu fertig ist, kann nun auch die Figuren des Mitpsielers bedienen (wenn er an der Reihe ist). & \\
		\midrule
		*a) & Benutzer verlässt Spiel & Spiel wird auf allen Clients und dem Server beendet. & [Ok|Err] \\
		 \cline{3-4} & & Gewinner (-Team) ist klar ersichtlich. & \\
		\midrule
		*b) & Server nicht erreichbar & Benutzer wird vom System benachrichtigt. & [Ok|Err] \\
		 \cline{3-4} & & Auf allen Clients wird eine Fehlermeldung angezeigt. & \\
		\bottomrule
	\end{tabular}
	
\subsection{Tests anhand der nichtfunktionalen Anforderungen}
	\begin {tabular}{l p{11cm} l}
		\toprule
		\textbf{Nr.} & \textbf{Beschreibung} & \textbf{Eingehalten} \\
		\midrule
		NF1 & Jeder Spielzug wird nach maximal 3 Sekunden visualisiert. Sprich der Zug wurde an den Server gesendet und vom Server wieder zurückerhalten. & [Ok|Err] \\
		NF2 & Spielzustand ist nach jedem Spielzug in allen Clients und auf dem Server konsistent. & [Ok|Err] \\
		NF3 & Inkonsistenz führt im Server und auf den Clients zu kontrolliertem Spielabbruch. & [Ok|Err] \\
		NF4 & Es können nicht mehrere Spiele pro Server erstellt werden. & [Ok|Err] \\
		NF5 & Ein Spiel kann nur mit der genauen Anzahl von vier Spielern gestartet werden. & [Ok|Err] \\
		NF6 & Das GUI ist (bis auf die Server-Konfiguration und Verbindungsaufnahme) nur mit der Maus bedienbar. & [Ok|Err] \\
		NF7 & Der Server sowie der Client ist uneingeschränkt auf den Plattformen Mac OS X 10.4, Windows XP SP2 und GNU/Linux verwendbar. & [Ok|Err] \\
		NF8 & Weder für den Server noch für den Client ist eine Installation oder Konfiguration notwendig. & [Ok|Err] \\
		NF9 & Ausser des Spielernamens und der Serverkonfiguration müssen keine Konfigurationen eingegeben werden. & [Ok|Err] \\
		\bottomrule
	\end{tabular}
	
\subsection{Tests anhand konkreter Spielsituationen}

\section{Verbesserungsmöglichkeiten}

\subsection{Bekannte Einschränkungen}
bekannte Einschränkungen erwähnen und erläutern

\subsection{Mögliche Detailverbesserungen}
daraus resultierende Verbesserungen beschreiben

\end{document}
